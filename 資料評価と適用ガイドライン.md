# 要件定義資料の評価と適用ガイドライン

## 評価サマリ表

| 資料種別 | 適用システム規模 | 適用システム種別 | 主な目的 | ステークホルダー | 作成難易度 | 保守性 | 総合評価 |
|---------|----------------|----------------|---------|----------------|-----------|--------|---------|
| システムコンテキスト | 小〜大規模 | 全種類 | システム境界の明確化 | 全ステークホルダー | ★☆☆ | ★★★ | ★★★ |
| スイムレーン図 | 小〜中規模 | 業務システム | 部門間の役割・責任分担の明確化 | 業務担当者、開発者 | ★★☆ | ★★☆ | ★★★ |
| DFD | 中〜大規模 | データ中心システム | データフローの可視化 | 開発者、アーキテクト | ★★☆ | ★★☆ | ★★★ |
| C4モデル | 中〜大規模 | 全種類 | アーキテクチャ全体の階層的表現 | 開発者、アーキテクト | ★★★ | ★★★ | ★★★ |
| アーキテクチャ概要図 | 中〜大規模 | 技術的に複雑なシステム | 技術アーキテクチャの詳細化 | 開発者、運用担当 | ★★★ | ★★☆ | ★★☆ |
| BPMN | 小〜大規模 | 業務プロセス中心 | 業務プロセスの標準化 | 業務担当者、開発者 | ★★★ | ★★★ | ★★★ |

**評価基準**: ★☆☆=低、★★☆=中、★★★=高

---

## 詳細評価表

### 1. システムコンテキスト図

| 評価項目 | 評価 | 説明 |
|---------|------|------|
| **適用システム規模** | 小〜大規模 | システム規模に関わらず適用可能。小規模でもシステム境界を明確にする価値がある |
| **適用システム種別** | - 業務システム<br>- Webシステム<br>- 組込みシステム<br>- IoTシステム | あらゆる種類のシステムに適用可能 |
| **主な目的** | システム境界の明確化 | - 外部システムとの連携点の明確化<br>- ステークホルダーの特定<br>- 責任範囲の明示 |
| **対象読者** | 全ステークホルダー | - 経営層<br>- 業務担当者<br>- 開発者<br>- 運用担当者 |
| **作成タイミング** | 要件定義初期 | プロジェクト開始直後、最初に作成すべき資料 |
| **作成難易度** | ★☆☆ 低 | - シンプルな図で表現可能<br>- 技術的知識が少なくても作成可能 |
| **保守性** | ★★★ 高 | - 変更が少ない<br>- システム全体像は安定している |
| **今回のシステムへの適合度** | ★★★ 高 | - LC自動倉庫との境界が明確<br>- 3種類のユーザーの役割が明確<br>- 外部システム連携が重要 |
| **メリット** | - システム全体像の共通理解<br>- ステークホルダー間のコミュニケーション促進<br>- 作成が容易 | |
| **デメリット** | - 詳細な業務フローは表現できない<br>- 技術的詳細は別資料が必要 | |
| **推奨する使用場面** | - プロジェクト提案時<br>- 要件定義開始時<br>- システム概要説明時 | |

---

### 2. スイムレーン図

| 評価項目 | 評価 | 説明 |
|---------|------|------|
| **適用システム規模** | 小〜中規模 | 大規模になると図が複雑になりすぎる。業務プロセス単位で分割が必要 |
| **適用システム種別** | - 業務システム<br>- ワークフローシステム<br>- 承認フローシステム | 部門間の連携が重要なシステムに最適 |
| **主な目的** | 部門間の役割・責任分担の明確化 | - 誰が何をするか明確化<br>- 部門間の連携点の可視化<br>- 業務フローの時系列表現 |
| **対象読者** | 業務担当者、開発者 | - 現場の業務担当者が理解しやすい<br>- 要件定義の確認に最適 |
| **作成タイミング** | 要件定義〜基本設計 | 業務フローが固まった段階で作成 |
| **作成難易度** | ★★☆ 中 | - 業務理解が必要<br>- 複雑なフローは図が煩雑になる |
| **保守性** | ★★☆ 中 | - 業務変更時に更新が必要<br>- プロセス変更の影響を受けやすい |
| **今回のシステムへの適合度** | ★★★ 高 | - 拠点倉庫担当、LC倉庫担当、LC自動倉庫の3者連携が明確<br>- 依頼→送信→出庫の時系列フローが重要<br>- 責任分担が明確 |
| **メリット** | - 誰が何をするか一目瞭然<br>- 業務担当者が理解しやすい<br>- 部門間の連携ミス防止 | |
| **デメリット** | - 複雑なフローは見づらい<br>- データ構造は表現できない<br>- 技術詳細は別資料が必要 | |
| **推奨する使用場面** | - 業務フロー確認<br>- 部門間調整<br>- テストシナリオ作成 | |

---

### 3. DFD（データフロー図）

| 評価項目 | 評価 | 説明 |
|---------|------|------|
| **適用システム規模** | 中〜大規模 | データの流れが複雑なシステムに適している |
| **適用システム種別** | - データベースシステム<br>- データ連携システム<br>- バッチ処理システム<br>- API連携システム | データ中心のシステムに最適 |
| **主な目的** | データフローの可視化 | - データの入力元と出力先の明確化<br>- データ変換処理の可視化<br>- データストアの特定 |
| **対象読者** | 開発者、アーキテクト | - 技術者向け<br>- データ設計の基礎資料 |
| **作成タイミング** | 要件定義〜基本設計 | データモデル設計と並行して作成 |
| **作成難易度** | ★★☆ 中 | - DFDの記法理解が必要<br>- レベル分けの判断が難しい |
| **保守性** | ★★☆ 中 | - データフロー変更時に更新必要<br>- レベル間の整合性維持が必要 |
| **今回のシステムへの適合度** | ★★★ 高 | - REST API/Webhook連携が中心<br>- 在庫データは保持せず、都度取得という特性を明示<br>- 出庫依頼→実績の非同期フローが重要 |
| **メリット** | - データの流れが明確<br>- データベース設計の基礎<br>- API設計の参考 | |
| **デメリット** | - 業務プロセスは表現しづらい<br>- 時系列は表現できない<br>- 技術者以外には難解 | |
| **推奨する使用場面** | - データモデル設計<br>- API設計<br>- バッチ処理設計 | |

---

### 4. C4モデル

| 評価項目 | 評価 | 説明 |
|---------|------|------|
| **適用システム規模** | 中〜大規模 | 階層的に表現できるため、大規模システムに向いている |
| **適用システム種別** | - 全種類のシステム<br>- 特にマイクロサービス<br>- クラウドネイティブ | 現代的なアーキテクチャに最適 |
| **主な目的** | アーキテクチャ全体の階層的表現 | - レベル1〜4で段階的に詳細化<br>- システム全体から個別コンポーネントまで一貫表現<br>- ズームイン/アウトの概念 |
| **対象読者** | 開発者、アーキテクト | - 技術者向け<br>- アーキテクチャ設計の標準表記 |
| **作成タイミング** | 基本設計〜詳細設計 | アーキテクチャ設計と並行 |
| **作成難易度** | ★★★ 高 | - C4モデルの理解が必要<br>- 4レベル全ての作成には時間がかかる<br>- 適切な粒度の判断が難しい |
| **保守性** | ★★★ 高 | - 階層構造で変更箇所が限定的<br>- レベルごとに独立して更新可能 |
| **今回のシステムへの適合度** | ★★★ 高 | - Djangoのレイヤーアーキテクチャを明確に表現<br>- REST APIサーバーとWebアプリの分離を表現<br>- 技術スタックを明示 |
| **メリット** | - 国際標準的な表記法<br>- ズームレベルで異なる読者に対応<br>- ツールサポート充実 | |
| **デメリット** | - 学習コストが高い<br>- 全レベル作成は時間がかかる<br>- 業務フローは表現できない | |
| **推奨する使用場面** | - アーキテクチャレビュー<br>- 技術選定<br>- 開発チーム間の共通理解 | |

---

### 5. アーキテクチャ概要図

| 評価項目 | 評価 | 説明 |
|---------|------|------|
| **適用システム規模** | 中〜大規模 | 技術的に複雑なシステムに適している |
| **適用システム種別** | - Webシステム<br>- エンタープライズシステム<br>- クラウドシステム | 技術アーキテクチャが重要なシステム |
| **主な目的** | 技術アーキテクチャの詳細化 | - レイヤー構造の明示<br>- 技術スタックの詳細<br>- セキュリティ/パフォーマンス設計 |
| **対象読者** | 開発者、運用担当 | - 技術者向け<br>- 実装・運用の参考資料 |
| **作成タイミング** | 基本設計〜詳細設計 | 技術選定後、実装前 |
| **作成難易度** | ★★★ 高 | - 技術的知識が必要<br>- 各レイヤーの責務理解が必要<br>- セキュリティ/性能知識が必要 |
| **保守性** | ★★☆ 中 | - 技術スタック変更時に更新必要<br>- アーキテクチャ変更の影響大 |
| **今回のシステムへの適合度** | ★★★ 高 | - Djangoの4層アーキテクチャを詳細化<br>- HTTP→HTTPSの移行計画を明示<br>- セキュリティ/エラーハンドリング詳細 |
| **メリット** | - 実装の指針となる<br>- 技術的意思決定の記録<br>- 非機能要件の実現方法明示 | |
| **デメリット** | - 技術者以外には難解<br>- 作成に時間がかかる<br>- 業務的視点が欠ける | |
| **推奨する使用場面** | - 実装ガイドライン作成<br>- 技術レビュー<br>- 運用設計 | |

---

### 6. BPMN（ビジネスプロセスモデル）

| 評価項目 | 評価 | 説明 |
|---------|------|------|
| **適用システム規模** | 小〜大規模 | プロセス単位で作成するため、規模に柔軟に対応 |
| **適用システム種別** | - 業務プロセス中心<br>- ワークフローシステム<br>- BPMシステム | 業務プロセスの標準化が重要なシステム |
| **主な目的** | 業務プロセスの標準化 | - 国際標準記法による表現<br>- 自動化への移行容易性<br>- プロセス最適化の基礎 |
| **対象読者** | 業務担当者、開発者 | - BPMツールで実行可能<br>- 業務分析・改善の基礎資料 |
| **作成タイミング** | 要件定義〜基本設計 | 業務分析段階で作成 |
| **作成難易度** | ★★★ 高 | - BPMN記法の習得が必要<br>- ゲートウェイ/イベントの使い分けが難しい<br>- 粒度の判断が難しい |
| **保守性** | ★★★ 高 | - 国際標準のため長期的に有効<br>- ツールサポートが充実<br>- プロセス変更を明確に追跡可能 |
| **今回のシステムへの適合度** | ★★☆ 中 | - 業務プロセスは比較的シンプル<br>- スイムレーン図で十分な部分も多い<br>- ただし将来的なBPM導入には有用 |
| **メリット** | - 国際標準で互換性高い<br>- BPMツールで実行可能<br>- プロセス最適化の基礎 | |
| **デメリット** | - 学習コストが高い<br>- 記法が複雑<br>- データ構造は表現できない | |
| **推奨する使用場面** | - BPMツール導入プロジェクト<br>- 業務プロセス改善<br>- 国際標準対応が必要な場合 | |

---

## システム特性別の推奨資料組み合わせ

### パターン1: 小規模業務システム（従業員50名未満、機能数10以下）

| 資料 | 必須度 | 理由 |
|------|--------|------|
| システムコンテキスト | ◎ 必須 | システム境界を明確にする |
| スイムレーン図 | ◎ 必須 | 業務フローの共通理解 |
| DFD | △ 任意 | データフローが複雑な場合のみ |
| C4モデル | × 不要 | オーバースペック |
| アーキテクチャ概要図 | × 不要 | オーバースペック |
| BPMN | × 不要 | スイムレーン図で十分 |

**推奨**: システムコンテキスト + スイムレーン図

---

### パターン2: 中規模業務システム（従業員50〜500名、機能数10〜50）

| 資料 | 必須度 | 理由 |
|------|--------|------|
| システムコンテキスト | ◎ 必須 | システム境界を明確にする |
| スイムレーン図 | ◎ 必須 | 業務フローの共通理解 |
| DFD | ○ 推奨 | データ連携が重要な場合は必須 |
| C4モデル | ○ 推奨 | アーキテクチャ設計の基礎 |
| アーキテクチャ概要図 | △ 任意 | 技術的に複雑な場合のみ |
| BPMN | △ 任意 | 業務標準化が重要な場合のみ |

**推奨**: システムコンテキスト + スイムレーン図 + DFD + C4モデル（レベル1〜2）

**今回のLC出庫指示システムはこのパターンに該当**

---

### パターン3: 大規模業務システム（従業員500名以上、機能数50以上）

| 資料 | 必須度 | 理由 |
|------|--------|------|
| システムコンテキスト | ◎ 必須 | システム境界を明確にする |
| スイムレーン図 | ○ 推奨 | プロセス単位で複数作成 |
| DFD | ◎ 必須 | データフローの可視化が重要 |
| C4モデル | ◎ 必須 | 全レベル作成を推奨 |
| アーキテクチャ概要図 | ◎ 必須 | 技術アーキテクチャの詳細化 |
| BPMN | ○ 推奨 | 業務標準化・BPMツール導入を検討 |

**推奨**: 全資料作成（ただし段階的に）

---

### パターン4: データ連携中心システム（ETL、データウェアハウス等）

| 資料 | 必須度 | 理由 |
|------|--------|------|
| システムコンテキスト | ◎ 必須 | 連携先システムを明確化 |
| スイムレーン図 | × 不要 | 業務フローが主目的ではない |
| DFD | ◎ 必須 | データフローが最重要 |
| C4モデル | ○ 推奨 | データパイプライン設計 |
| アーキテクチャ概要図 | ◎ 必須 | データ処理アーキテクチャ |
| BPMN | × 不要 | 業務プロセスが主目的ではない |

**推奨**: システムコンテキスト + DFD + C4モデル + アーキテクチャ概要図

---

### パターン5: マイクロサービス/API中心システム

| 資料 | 必須度 | 理由 |
|------|--------|------|
| システムコンテキスト | ◎ 必須 | サービス境界の明確化 |
| スイムレーン図 | △ 任意 | サービス間連携の可視化に有用 |
| DFD | ◎ 必須 | API間のデータフロー可視化 |
| C4モデル | ◎ 必須 | サービス単位で全レベル作成 |
| アーキテクチャ概要図 | ◎ 必須 | マイクロサービスアーキテクチャ詳細 |
| BPMN | × 不要 | 業務プロセスより技術中心 |

**推奨**: システムコンテキスト + DFD + C4モデル（全レベル）+ アーキテクチャ概要図

---

## 今回のLC出庫指示システムにおける評価

### システム特性
- **規模**: 中規模（30拠点、3種類のユーザー、7機能）
- **種別**: 業務システム + API連携システム
- **複雑性**: 中程度（REST API/Webhook連携が中心）
- **ユーザー数**: 約100名程度（拠点倉庫担当30名 + LC倉庫担当数名 + 管理者数名）

### 各資料の有用性評価

| 資料 | 有用性 | 評価理由 |
|------|--------|---------|
| システムコンテキスト | ★★★ 非常に有用 | - LC自動倉庫との境界が明確<br>- 3種類のユーザーの役割が明確<br>- 外部連携の全体像把握に最適 |
| スイムレーン図 | ★★★ 非常に有用 | - 拠点倉庫担当、LC倉庫担当、LC自動倉庫の3者連携が明確<br>- 依頼→送信→出庫の時系列が重要<br>- 業務担当者との要件確認に最適 |
| DFD | ★★★ 非常に有用 | - REST API/Webhook連携のデータフロー可視化<br>- 在庫データを保持しない特性を明示<br>- API設計の基礎資料として有用 |
| C4モデル | ★★★ 非常に有用 | - Djangoの階層構造を明確に表現<br>- WebアプリとREST APIサーバーの分離を表現<br>- 開発チームの共通理解に最適 |
| アーキテクチャ概要図 | ★★☆ 有用 | - HTTP→HTTPSの移行計画明示に有用<br>- セキュリティ・エラーハンドリング詳細化<br>- ただしC4モデルと一部重複 |
| BPMN | ★☆☆ やや過剰 | - 業務プロセスは比較的シンプル<br>- スイムレーン図で十分カバー可能<br>- ただし将来のBPM導入には有用 |

### 推奨する資料セット（優先順位順）

1. **必須（Phase 1）**: 
   - システムコンテキスト
   - スイムレーン図
   - DFD（レベル0〜1）

2. **推奨（Phase 2）**:
   - C4モデル（レベル1〜2）
   - アーキテクチャ概要図（セキュリティ・エラーハンドリング部分）

3. **任意（Phase 3）**:
   - C4モデル（レベル3〜4）
   - BPMN（将来のBPMツール導入を見据える場合）

---

## 資料作成の実践的ガイドライン

### 作成順序の推奨

```
1. システムコンテキスト（1日）
   ↓
2. スイムレーン図（2〜3日）
   ↓
3. DFD レベル0〜1（2日）
   ↓
4. C4モデル レベル1〜2（3日）
   ↓
5. アーキテクチャ概要図（2日）
   ↓
6. DFD レベル2（1日）
   ↓
7. C4モデル レベル3〜4（3日）
   ↓
8. BPMN（必要に応じて）（5日）
```

**合計**: 約14〜19日（必須資料のみなら約8日）

### 保守のタイミング

| 資料 | 更新頻度 | 更新トリガー |
|------|---------|-------------|
| システムコンテキスト | 低 | 外部システム連携追加時 |
| スイムレーン図 | 中 | 業務フロー変更時 |
| DFD | 中 | データフロー変更時、API変更時 |
| C4モデル | 中 | アーキテクチャ変更時 |
| アーキテクチャ概要図 | 高 | 技術スタック変更時 |
| BPMN | 低 | 業務プロセス標準変更時 |

---

## まとめ

### 一般的な推奨事項

1. **全プロジェクト共通で必須**:
   - システムコンテキスト図

2. **業務システムの場合**:
   - システムコンテキスト + スイムレーン図 or BPMN

3. **データ連携が重要な場合**:
   - 上記 + DFD

4. **技術的に複雑な場合**:
   - 上記 + C4モデル + アーキテクチャ概要図

5. **大規模システムの場合**:
   - 全資料作成（段階的に）

### LC出庫指示システムの結論

**推奨資料セット**: 
- システムコンテキスト（必須）
- スイムレーン図（必須）
- DFD（必須）
- C4モデル レベル1〜2（推奨）
- アーキテクチャ概要図（推奨、ただしセキュリティ・エラーハンドリング部分のみ）

**BPMNは任意**: 業務プロセスが比較的シンプルなため、スイムレーン図で十分。ただし将来的なBPMツール導入を見据える場合は作成を検討。

この組み合わせにより、業務視点（スイムレーン図）、データ視点（DFD）、技術視点（C4モデル、アーキテクチャ概要図）のバランスが取れた要件定義が可能となる。
